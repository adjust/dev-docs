---
title: "配置"
description: "请按照本节中的说明配置 Adjust SDK。"
slug: "en/sdk/flutter/configuration"
sidebar-position: 1
---
请使用该文档中的方法配置 Adjust SDK 行为。

实例化 config 对象
-------------

```dart
AdjustConfig(this._appToken, this._environment) {
   _initCallbackHandlers();
   _skAdNetworkHandling = true;
}
```

要配置 Adjust SDK，您需要实例化一个 `AdjustConfig` 对象。该对象包含 **只读** 配置选项。请将这些配置选项发送给 Adjust SDK。

要实例化您的 config 对象，请创建新的 `AdjustConfig` 实例，并传送下列参数：

* `appToken` \(`String`\): Your [Adjust app token](https://help.adjust.com/en/article/app-token-and-reporting-currency#view-your-app-details).
* `environment` \(`String`\): The environment you want to run the SDK in. Pass `AdjustEnvironment.sandbox` to run the SDK in sandbox mode for testing. Pass `AdjustEnvironment.production` to run the SDK in production mode for release.

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.sandbox);
//...
Adjust.start(adjustConfig);
```

只读配置
----

**只读** 配置选项会在 SDK 初始化 **之前** 在 `AdjustConfig` 实例中设定。这些配置选项无法在 SDK 运行过程中变更。请务必在运行 `Adjust.start()` 之前配置要使用的所有设置。

### 设置日志级别

```dart
AdjustLogLevel? logLevel;
```

通过 Adjust SDK，您可以配置不同日志级别，返回不同数量的信息。可用的日志级别包括：
<table> 

|         logLevel          |          描述          |
|---------------------------|----------------------|
| `AdjustLogLevel.verbose`  | 启用完整日志               |
| `AdjustLogLevel.debug`    | 启用调试记录               |
| `AdjustLogLevel.info`     | 仅显示信息级别日志 \(默认选项\) |
| `AdjustLogLevel.warn`     | 禁用信息日志               |
| `AdjustLogLevel.error`    | 禁用警告及更低级别日志          |
| `AdjustLogLevel.assert`   | 禁用错误及更低级别日志          |
| `AdjustLogLevel.suppress` | 禁止所有日志               |

</Table> 

您可以为 config 实例 `logLevel` 属性指定 `AdjustLogLevel` 值，以设置日志级别。

* `logLevel` \(`AdjustLogLevel`\): The log level you want to use.

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.logLevel = AdjustLogLevel.verbose;
//...
Adjust.start(adjustConfig);
```

### 设置外部设备标识符

```dart
String? externalDeviceId;
```

外部设备标识符是您为设备或用户自定义的一个值。您可以通过这个值在不同的会话和平台中识别用户。您也可以通过该值基于用户对安装进行去重，这样同一位用户就不会被记录为多次新安装了。请联系您的 Adjust 代表来开始使用外部设备 ID。

您还可以使用外部设备 ID 作为设备的自定义标识符。这可以确保您的数据与其他系统中的数据保持一致性。在 config 实例上将您的外部设备 ID 指定至`externalDeviceId`属性。

* `externalDeviceId` \(`String`\): Your external device identifier. This value is **case sensitive** . If you have imported external device IDs, make sure the value you pass matches the imported value.

<callout type="seealso"> 

要了解更多信息，请参考 Adjust 帮助中心里的[外部设备标识符文档](https://help.adjust.com/en/article/external-device-identifiers)。
</Callout> 

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.externalDeviceId = '{Your-External-Device-Id}';
//...
Adjust.start(adjustConfig);
```

如果您想在商业分析中使用外部设备 ID，则可以将其作为[会话回传参数](/en/sdk/flutter/features/session-parameters)发送。

您可以将已有外部设备 ID 导入到 Adjust。这能保证 Adjust 服务器将未来的数据与已有设备记录相匹配。请联系您的 Adjust 代表，了解更多信息。

### 设置默认链接识别码

```dart
String? defaultTracker;
```

如果您的应用已预安装在设备上，那么您可以配置一个默认链接识别码。当用户首次打开预安装应用时，安装就会被归因给默认链接识别码。请将默认链接识别码指定给 config 实例的 `defaultTracker` 属性。

* `defaultTracker` \(`String`\): The [Adjust link token](https://help.adjust.com/en/article/links#adjust-link-token) you want to record preinstalled installs against.

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.defaultTracker = '{TrackerToken}';
//...
Adjust.start(adjustConfig);
```

### 启用成本数据发送

```dart
bool? needsCost;
```

By default, the Adjust SDK doesn't send cost data as part of a user's attribution. You can configure the SDK to send this data by enabling cost data sending. To enable cost data sending, assign a `bool` value to the `needsCost` property of your config instance.

* `needsCost` \(`bool`\): set to `true` to enable cost data sending or `false` to disable cost data sending.

您可以在用户的[归因信息](/en/sdk/flutter/features/attribution)中访问成本数据。

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.needsCost = true;
//...
Adjust.start(adjustConfig);
```

### 启用后台记录

```dart
bool? sendInBackground;
```

By default, the Adjust SDK pauses the sending of requests when your app is running in the background. You can configure the SDK to send requests in the background by enabling the background recording. To enable background recording, assign a `bool` value to the `sendInBackground` property of your config instance.

* `sendInBackground` \(`bool`\): Set to `true` to enable background sending or `false` to disable background sending.

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.sendInBackground = true;
//...
Adjust.start(adjustConfig);
```

### 启用事件缓冲

```dart
bool? eventBufferingEnabled;
```

用户在应用中触发事件后，Adjust SDK 会立即发送事件信息。您可以通过设置事件缓冲来按指定时间发送事件信息。事件缓冲会将事件存储在设备本地缓冲中，每分钟发送一批请求。

Your config object contains a boolean `eventBufferingEnabled` property that controls this behavior. To enable event buffering, assign a `bool` value to the `eventBufferingEnabled` property of your config instance.

* `eventBufferingEnabled` \(`bool`\): Set to `true` to enable event buffering or `false` to disable event buffering.

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.eventBufferingEnabled = true;
//...
Adjust.start(adjustConfig);
```

### 延迟 SDK 启动

```dart
double? delayStart;
```

By default, the Adjust SDK starts as soon as your app opens. If you want to send data that isn't available at launch in [session parameters](/en/sdk/flutter/features/session-parameters), you can delay the start of the SDK. This can be helpful if you are sending information such as unique identifiers.

To configure a startup delay, assign a `double` value to the `delayStart` property of your config instance.

* `delayStart` \(`double`\): The time \(in seconds\) by which to delay the start of the SDK. You can delay the start of the SDK by up to **10 seconds** .

```dart
AdjustConfig adjustConfig = new AdjustConfig('{YourAppToken}', AdjustEnvironment.Sandbox);
//...
adjustConfig.delayStart(5.5);
//...
Adjust.start(adjustConfig);
```

动态配置
----

为响事件或用户进行的操作， **动态** 配置选项可能在 SDK 的生命周期中发生变化。

### 开关离线模式

```dart
static void setOfflineMode(bool isOffline)
```

<callout type="important"> 

离线模式设置在会话之间不被保存。离线模式在每次新会话开始时会被关闭。
</Callout> 

Adjust SDK 会实时向 Adjust 后端发送事件和会话数据。您可以通过将 SDK 设为离线状态来暂停信息的发送。在离线状态中，SDK 会在设备本地文件中存储所有数据。离线模式关闭后，SDK 会将此信息发送至 Adjust 服务器。

您可以随时使用下列参数调用 `setOfflineMode` 方法，以开关离线模式：

* `isOffline` \(`bool`\): Set to `true` to enable offline mode or `false` to disable offline mode.

```dart
Adjust.setOfflineMode(true);
```

### 设置推送标签 \(Push token\)

```dart
static void setPushToken(String token)
```

推送标签 \(Push token\) 用于[受众](https://help.adjust.com/en/article/audiences)和客户回传。在[卸载和重装跟踪](https://help.adjust.com/en/article/uninstalls-reinstalls)中，推送标签也是必要的。

您的 config 对象包含一个`pushToken`字符串属性，您可以通过该属性恢复推送标签。您可以随时调用`setPushToken`方法，并发送下列参数，以更新该属性：

* `token` \(`String`\): Your push token.

<callout type="note"> 

如果您能从网页视图中获得推送标签，那么可以在 Javascript 中调用 `setPushToken` 方法。
</Callout> 

```dart
Adjust.setPushToken('{PushNotificationsToken}');
```

### 禁用或启用 SDK

<callout type="important"> 

您只能在首次会话之后调用此方法。设定会在不同会话间保持延续。
</Callout> 

```dart
static void setEnabled(bool isEnabled)
```

应用打开时 Adjust SDK 会默认运行。您可以通过禁用和启用 Adjust SDK 来暂停或恢复记录。禁用 Adjust SDK 时，SDK 不会向 Adjust 服务器发送任何数据。

您可以随时使用下列参数调用 `setEnabled` 方法，以启用或禁用 SDK：

* `isEnabled` \(`bool`\): Set to `true` to enable the SDK or `false` to disable the SDK.

```dart
Adjust.setEnabled(false);
```

#### 查看启用状态

```dart
static Future<bool id="sl-md0000000"> isEnabled() async
```

You can check if the Adjust SDK is enabled at any time by calling the `isEnabled` method. This method returns a `bool` value indicating if the SDK is **enabled** \(`true`\) or **disabled** \(`false`\).

```dart
Adjust.isEnabled();
```

