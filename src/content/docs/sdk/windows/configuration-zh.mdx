---
title: "配置"
description: "请按照本节中的说明配置 Adjust SDK。"
category-title: "配置"
slug: "en/sdk/windows/configuration"
sidebar-position: 1
---
请使用该文档中的方法配置 Adjust SDK 行为。

实例化 config 对象
-------------

```cs
public AdjustConfig(string appToken, string environment, Action<string id="sl-md0000000"> logDelegate = null, LogLevel? logLevel = null)
```

要配置 Adjust SDK，您需要实例化一个 `AdjustConfig` 对象。该对象包含 **只读** 配置选项。请将这些配置选项发送给 Adjust SDK。

要实例化您的 config 对象，请创建新的 `AdjustConfig` 实例，并传送下列参数：

* `appToken` \(`string`\): Your [Adjust app token](https://help.adjust.com/en/article/app-token-and-reporting-currency#view-your-app-details).
* `environment` \(`string`\): The environment you want to run the SDK in. Pass `AdjustConfig.EnvironmentSandbox` to run the SDK in sandbox mode for testing. Pass `AdjustConfig.EnvironmentProduction` to run the SDK in production mode for release.
* `logDelegate` \(`Action<string id="sl-md0000000">`\): A function to which logging is delegated. You can also configure this using the [`setLogDelegate` method](#configure-a-log-delegate).
* `logLevel` \(`LogLevel`\): The level of logging you want to record. The following log levels are supported:

<table> 

|      logLevel       |          描述          |
|---------------------|----------------------|
| `LogLevel.Verbose`  | 启用完整日志               |
| `LogLevel.Debug`    | 启用调试记录               |
| `LogLevel.Info`     | 仅显示信息层级日志 \(默认选项\) |
| `LogLevel.Warn`     | 禁用信息警告               |
| `LogLevel.Error`    | 禁用警告及更低级别日志          |
| `LogLevel.Assert`   | 禁用错误及更低级别日志          |
| `LogLevel.Suppress` | 禁止所有日志               |

</Table> 

```cs
string appToken = "hmqwpvspxnuo";
string environment = AdjustConfig.EnvironmentSandbox;
var adjustConfig = new AdjustConfig(appToken, environment,
   msg => System.Diagnostics.Debug.WriteLine(msg), LogLevel.Verbose);
Adjust.ApplicationLaunching(adjustConfig);
```

只读配置
----

**只读** 配置选项会在 SDK 初始化 **之前** 在 `AdjustConfig` 实例中设定。这些配置选项无法在 SDK 运行过程中变更。请务必在运行 `Adjust.ApplicationLaunching()` 之前配置要使用的所有设置。

### 配置日志委托

```cs
public void setLogDelegate(Action<string id="sl-md0000000"> logDelegate);
```

日志委托是一种函数。Adjust SDK 会调用日志委托以记录日志。要配置日志委托，请将您的日志函数传送至 `setLogDelegate`。Adjust SDK 会在每次输出日志消息时调用该函数。

```cs
AdjustConfig adjustConfig = new AdjustConfig("{YourAppToken}", AdjustEnvironment.Sandbox, true);
//...
adjustConfig.setLogDelegate(msg => Debug.Log(msg));
//...
Adjust.ApplicationLaunching(config);
```

### 设置外部设备标识符

```cs
public void setExternalDeviceId(string externalDeviceId);
```

外部设备标识符是您为设备或用户自定义的一个值。您可以通过这个值在不同的会话和平台中识别用户。您也可以通过该值基于用户对安装进行去重，这样同一位用户就不会被记录为多次新安装了。请联系您的 Adjust 代表来开始使用外部设备 ID。

您还可以使用外部设备 ID 作为设备的自定义标识符。这可以确保您的数据与其他系统中的数据保持一致性。您可以使用下列参数调用 `setExternalDeviceId` 方法，以设置该属性：

* `externalDeviceId` \(`string`\): Your external device identifier. This value is **case sensitive** . If you have imported external device IDs, make sure the value you pass matches the imported value.

<callout type="seealso"> 

要了解更多信息，请参考 Adjust 帮助中心里的[外部设备标识符文档](https://help.adjust.com/en/article/external-device-identifiers)。
</Callout> 

```cs
AdjustConfig adjustConfig = new AdjustConfig("{YourAppToken}", AdjustEnvironment.Sandbox, true);
//...
adjustConfig.setExternalDeviceId("{Your-External-Device-Id}");
//...
Adjust.ApplicationLaunching(adjustConfig);
```

如果您想在商业分析中使用外部设备 ID，则可以将其作为[会话回传参数](/en/sdk/android/features/session-parameters)发送。

您可以将已有外部设备 ID 导入到 Adjust。这能保证 Adjust 服务器将未来的数据与已有设备记录相匹配。请联系您的 Adjust 代表，了解更多信息。

### 设置默认链接识别码

```cs
public string DefaultTracker { get; set; }
```

如果您的应用已预安装在设备上，那么您可以配置一个默认链接识别码。当用户首次打开预安装应用时，安装就会被归因给默认链接识别码。要设置默认链接识别码，请将您的 [Adjust 链接识别码](https://help.adjust.com/en/article/links#adjust-link-token)指定给 config 实例上的 `DefaultTracker` 属性。

```cs
var adjustConfig = new AdjustConfig(appToken, environment,
   msg => System.Diagnostics.Debug.WriteLine(msg), LogLevel.Verbose);
adjustConfig.DefaultTracker = "{TrackerToken}";
Adjust.ApplicationLaunching(adjustConfig);
```

### 启用后台记录

```cs
public bool SendInBackground { get; set; }
```

By default, the Adjust SDK pauses the sending of requests when your app is running in the background. You can configure the SDK to send requests in the background by enabling the background recording. To enable background recording, assign a `bool` value to the `SendInBackground` property of your config instance.

```cs
var adjustConfig = new AdjustConfig(appToken, environment,
   msg => System.Diagnostics.Debug.WriteLine(msg), LogLevel.Verbose);
//...
adjustConfig.SendInBackground = true;
//...
Adjust.ApplicationLaunching(adjustConfig);
```

### 启用事件缓冲

```cs
public bool EventBufferingEnabled { get; set; }
```

用户在应用中触发事件后，Adjust SDK 会立即发送事件信息。您可以通过设置事件缓冲来按指定时间发送事件信息。事件缓冲会将事件存储在设备本地缓冲中，每分钟发送一批请求。

Your config object contains a `bool` `EventBufferingEnabled` property that controls this behavior. To enable event buffering, assign a `bool` value to the `EventBufferingEnabled` property of your config instance.

* `EventBufferingEnabled` \(`bool`\): Set to `true` to enable event buffering or `false` to disable event buffering.

```cs
var adjustConfig = new AdjustConfig(appToken, environment,
   msg => System.Diagnostics.Debug.WriteLine(msg), LogLevel.Verbose);
//...
adjustConfig.EventBufferingEnabled = true;
//...
Adjust.ApplicationLaunching(adjustConfig);
```

### 延迟 SDK 启动

```cs
public TimeSpan? DelayStart { get; set; }
```

By default, the Adjust SDK starts as soon as your app opens. If you want to send data that isn't available at launch in [session parameters](/en/sdk/flutter/features/session-parameters), you can delay the start of the SDK. This can be helpful if you are sending information such as unique identifiers.

To configure a startup delay, assign a `TimeSpan` value to the `DelayStart` property of your config instance.

* `delayStart` \(`TimeSpan`\): The time \(in seconds\) by which to delay the start of the SDK. You can delay the start of the SDK by up to **10 seconds** .

```cs
adjustConfig.DelayStart = TimeSpan.FromSeconds(5.5);
```

动态配置
----

为响事件或用户进行的操作， **动态** 配置选项可能在 SDK 的生命周期中发生变化。

### 开关离线模式

```cs
public void SetOfflineMode(bool offline);
```

<callout type="important"> 

离线模式设置在会话之间不被保存。离线模式在每次新会话开始时会被关闭。
</Callout> 

Adjust SDK 会实时向 Adjust 后端发送事件和会话数据。您可以通过将 SDK 设为离线状态来暂停信息的发送。在离线状态中，SDK 会在设备本地文件中存储所有数据。离线模式关闭后，SDK 会将此信息发送至 Adjust 服务器。

您可以随时使用下列参数调用 `SetOfflineMode` 方法，以开关离线模式：

* `offline` \(`bool`\): Set to `true` to enable offline mode or `false` to disable offline mode.

```cs
Adjust.SetOfflineMode(true);
```

### 设置推送标签 \(Push token\)

```cs
public static void SetPushToken(string pushToken);
```

推送标签 \(Push token\) 用于[受众](https://help.adjust.com/en/article/audiences)和客户回传。在[卸载和重装跟踪](https://help.adjust.com/en/article/uninstalls-reinstalls)中，推送标签也是必要的。

Your config object contains a `string` `pushToken` property that you can use to store your push token. You can update this property at any time by calling the `setPushToken` method and passing the following arguments:

* `pushToken` \(`string`\): Your push token.

<callout type="note"> 

如果您能从网页视图中获得推送标签，那么可以在 Javascript 中调用 `setPushToken` 方法。
</Callout> 

```cs
Adjust.SetPushToken("{YourDeviceToken}");
```

### 禁用或启用 SDK

<callout type="important"> 

您只能在首次会话之后调用此方法。设定会在不同会话间保持延续。
</Callout> 

```cs
public static void SetEnabled(bool enabled);
```

应用打开时 Adjust SDK 会默认运行。您可以通过禁用和启用 Adjust SDK 来暂停或恢复记录。禁用 Adjust SDK 时，SDK 不会向 Adjust 服务器发送任何数据。

您可以随时使用下列参数调用 `SetEnabled` 方法，以启用或禁用 SDK：

* `enabled` \(`bool`\): Set to `true` to enable the SDK or `false` to disable the SDK.

```cs
Adjust.SetEnabled(false);
```

#### 查看启用状态

```cs
public static bool IsEnabled();
```

You can check if the Adjust SDK is enabled at any time by calling the `isEnabled` method. This method returns a `bool` value indicating if the SDK is **enabled** \(`true`\) or **disabled** \(`false`\).

```cs
Adjust.IsEnabled();
```

