---
title: "アトリビューション情報の取得"
description: "Adjust SDKを使ってアトリビューションの変更を受信する"
slug: "en/sdk/ios/features/attribution"
---
ユーザーがAdjustリンクをクリックすると、そのアトリビューション情報が更新されます。これは、ユーザーが[ディープリンク](https://help.adjust.com/en/article/deep-links)をクリックした場合に発生します。ユーザーのアトリビューションについての情報は、`AdjustAttribution`クラスに表示されます。

ADJAttributionクラスのプロパティ
-----------------------

`AdjustAttribution`クラスには、デバイスの現在のアトリビューションステータスに関する詳細が含まれています。ユーザーの入力されていない値は全て`null`値として返されます。
<callout type="note"> 

以下の値は、`ADJConfig`インスタンスの`needsCost`プロパティが`true`になっている場合にのみアクセスできます：

* `costType`
* `costAmount`
* `costCurrency`

</Callout> <table> 

|       値        | データタイプ |                                    説明                                    |
|----------------|--------|--------------------------------------------------------------------------|
| `trackerToken` | 文字列    | デバイスが現在アトリビュートされているトラッカーのトークン                                            |
| `trackerName`  | 文字列    | デバイスが現在アトリビュートされているトラッカーの名前                                              |
| `network`      | 文字列    | デバイスが現在アトリビュートされているネットワークの名前                                             |
| `campaign`     | 文字列    | デバイスが現在アトリビュートされているキャンペーンの名前                                             |
| `adgroup`      | 文字列    | デバイスが現在アトリビュートされているアドグループの名前                                             |
| `creative`     | 文字列    | デバイスが現在アトリビュートされているクリエイティブの名前                                            |
| `clickLabel`   | 文字列    | インストールがタグされている[クリックラベル](https://help.adjust.com/en/article/user-rewards) |
| `adid`         | 文字列    | デバイスに割り当てられた一意のAdjust ID                                                 |
| `costType`     | 文字列    | キャンペーン価格モデル（例：cpi）                                                       |
| `costAmount`   | 数値     | インストールのコスト                                                               |
| `costCurrency` | 文字列    | コストに関連する[3文字のISO 4217通貨コード](https://www.iban.com/currency-codes)         |

</Table> 

アトリビューションが変更されたときに関数をトリガーする
---------------------------

```objc
@property (nonatomic, weak, nullable) NSObject<adjustdelegate id="sl-md0000000"> *delegate;
```

SDKはアトリビューションの変更を受信し、更新を検出したときに関数を呼び出すことができます。デリゲート関数を設定するには：

1. Web viewを使用していない場合は、`AdjustDelegate`宣言を`AppDelegate`ヘッダーファイルに追加します。

<tabs> <tab title="Swift" sync="swift"> 

```swift
class AppDelegate: UIResponder, UIApplicationDelegate, AdjustDelegate {
}
```

</Tab> <tab title="Objective-C" sync="objc"> 

```objective-c
@interface AppDelegate : UIResponder <UIApplicationDelegate, AdjustDelegate>
```

</Tab> </Tabs> 

2. デリゲートコールバック関数をapp delegateに追加します。

<tabs> <tab title="Swift" sync="swift"> 

```swift
class AppDelegate: UIResponder, UIApplicationDelegate, AdjustDelegate {
   func adjustAttributionChanged(_ attribution: ADJAttribution?) {
      /// ...
   }
}
```

</Tab> <tab title="Objective-C" sync="objc"> 

```objective-c
- (void)adjustAttributionChanged:(ADJAttribution *)attribution {
   /// ...
}
```

</Tab> </Tabs> 

3. Adjustのconfigインスタンスでデリゲートを設定します

<tabs> <tab title="Swift" sync="swift"> 

```swift
let yourAppToken = "{YourAppToken}"
let environment = ADJEnvironmentSandbox as? String
let adjustConfig = ADJConfig(
   appToken: yourAppToken,
   environment: environment)
adjustConfig?.delegate = self
//...
Adjust.appDidLaunch(adjustConfig)
```

</Tab> <tab title="Objective-C" sync="objc"> 

```objc
*adjustConfig = [ADJConfig configWithAppToken:@"{YourAppToken}"
                                 environment:ADJEnvironmentSandbox];
[adjustConfig setDelegate:self];
/// ...
[Adjust appDidLaunch:adjustConfig];
```

</Tab> <tab title="Javascript" sync="js"> 

```javascript
setupWebViewJavascriptBridge(function(bridge) {
   var yourAppToken = yourAppToken;
   var environment = AdjustConfig.EnvironmentSandbox;
   var adjustConfig = new AdjustConfig(yourAppToken, environment);
   adjustConfig.setAttributionCallback(function(attribution) {
   // In this example, we're just displaying alert with attribution content.
   alert('Tracker token = ' + attribution.trackerToken + '\n' +
         'Tracker name = ' + attribution.trackerName + '\n' +
         'Network = ' + attribution.network + '\n' +
         'Campaign = ' + attribution.campaign + '\n' +
         'Adgroup = ' + attribution.adgroup + '\n' +
         'Creative = ' + attribution.creative + '\n' +
         'Click label = ' + attribution.clickLabel + '\n' +
         'Adid = ' + attribution.adid);
   });
});
```

</Tab> </Tabs> 

デリゲート関数内では、ユーザーの`Attribution`情報にアクセスすることができます。使用可能なプロパティの一覧は、[`ADJAttribution`クラスのプロパティ](#adjattribution-class-properties)を参照してください。

現在のアトリビューション情報を取得
-----------------

```objc
+ (nullable ADJAttribution *)attribution;
```

ユーザーがアプリをインストールすると、Adjustはそのインストールをキャンペーンにアトリビュートします。Adjust SDKでは、インストールのキャンペーンアトリビューションの詳細にアクセスすることができます。この情報を返すには、`attribution`メソッドを呼び出して、アトリビューション情報を`ADJAttribution`オブジェクトとして返します。
<tabs> <tab title="Swift" sync="swift"> 

```swift
let attribution = Adjust.attribution()
```

</Tab> <tab title="Objective-C" sync="objc"> 

```objc
ADJAttribution *attribution = [Adjust attribution];
```

</Tab> <tab title="Javascript" sync="js"> 

```js
var attribution = Adjust.getAttribution();
```

</Tab> </Tabs>

