---
title: "サブスクリプション情報を送信する"
description: "Adjustにサブスクリプション情報を送信するには、これらのメソッドを使用してください。"
slug: "en/sdk/android/features/subscriptions"
---
<callout type="important"> 

以下の手順は、Adjust SDK内でサブスクリプション計測を行う場合にのみ有効です。この機能を有効化するには、アプリ固有の情報を別途追加する必要があります。設定のサポートをいたしますので、[support@adjust.com](mailto:support@adjust.com)または担当のテクニカルアカウントマネージャーまでお問い合わせください。
</Callout> 

Playストアのサブスクリプションを記録し、それぞれの有効性をAdjust SDKで確認できます。ユーザーがサブスクリプションを購入したら、詳細を含む `AdjustPlayStoreSubscription`オブジェクトをインスタンス化します。

1\. サブスクリプションオブジェクトをインスタンス化する
------------------------------

```java
public AdjustPlayStoreSubscription(final long price,
                                       final String currency,
                                       final String sku,
                                       final String orderId,
                                       final String signature,
                                       final String purchaseToken)
```

開始するには、サブスクリプション購入の詳細を含むサブスクリプションオブジェクトをインスタンス化する必要があります。これを行うには、新しい`AdjustPlayStoreSubscription`を作成して次の引数をパスします：
<table> 

|     パラメーター      | データタイプ |                                                                       説明                                                                        |
|-----------------|--------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| `price`         | 数値     | サブスクリプションの価格                                                                                                                                    |
| `currency`      | 文字列    | サブスクリプション通貨                                                                                                                                     |
| `sku`           | 文字列    | プロダクトID                                                                                                                                         |
| `orderId`       | 文字列    | トランザクションID                                                                                                                                      |
| `signature`     | 文字列    | 購入データのシグネチャー                                                                                                                                    |
| `purchaseToken` | 文字列    | トランザクションの一意のトークン。詳細は[Googleのドキュメント](https://developer.android.com/reference/com/android/billingclient/api/Purchase#getPurchaseToken())を参照してください |

</Table> <tabs> <tab title="Kotlin" sync="kotlin"> 

```kotlin
val subscription = AdjustPlayStoreSubscription(
    price,
    currency,
    sku,
    orderId,
    signature,
    purchaseToken);

Adjust.trackPlayStoreSubscription(subscription)
```

</Tab> <tab title="Java" sync="java" > 

```java
AdjustPlayStoreSubscription subscription = new AdjustPlayStoreSubscription(
    price,
    currency,
    sku,
    orderId,
    signature,
    purchaseToken);

Adjust.trackPlayStoreSubscription(subscription);
```

</Tab> </Tabs> 

### 購入データを記録する

```java
public void setPurchaseTime(final long purchaseTime)
```

ユーザーがサブスクリプションを購入した日を記録することができます。SDKはこのデータを返して、レポートします。タイムスタンプを使用して`setPurchaseTime`メソッドを呼び出し、この情報を記録します。
<tabs> <tab title="Kotlin" sync="kotlin"> 

```kotlin
val subscription = AdjustPlayStoreSubscription(
    price,
    currency,
    sku,
    orderId,
    signature,
    purchaseToken);
subscription.setPurchaseTime(purchaseTime)

Adjust.trackPlayStoreSubscription(subscription)
```

</Tab> <tab title="Java" sync="java" > 

```java
AdjustPlayStoreSubscription subscription = new AdjustPlayStoreSubscription(
    price,
    currency,
    sku,
    orderId,
    signature,
    purchaseToken);
subscription.setPurchaseTime(purchaseTime);

Adjust.trackPlayStoreSubscription(subscription);
```

</Tab> </Tabs> 

### コールバックパラメーターを追加する

```java
public void addCallbackParameter(String key, String value)
```

コールバックパラメーターをサブスクリプションオブジェクトに追加することができます。Adjustは、これらのパラメーターをコールバックURLに追加します。コールバックパラメーターを追加するには、サブスクリプションオブジェクトの`addCallbackParameter`メソッドを呼び出してください。このメソッドを複数回呼び出すことで、複数のコールバックパラメーターを追加できます。
<tabs> <tab title="Kotlin" sync="kotlin"> 

```kotlin
subscription.addCallbackParameter("key", "value")
subscription.addCallbackParameter("foo", "bar")
```

</Tab> <tab title="Java" sync="java" > 

```java
subscription.addCallbackParameter("key", "value");
subscription.addCallbackParameter("foo", "bar");
```

</Tab> </Tabs> 

### パートナーパラメーターの追加

```java
public void addPartnerParameter(String key, String value)
```

パートナーパラメーターをサブスクリプションオブジェクトに追加することができます。SDKは、ユーザーがサブスクリプションを購入した時に、Adjustサーバーへこれらを送信します。Adjustサーバーは、その情報をネットワークパートナーに転送します。パラメーターパラメーターを追加するには、サブスクリプションオブジェクトの`addPartnerParameter`メソッドを呼び出してください。このメソッドを複数回呼び出すことで、複数のコールバックパラメーターを追加できます。
<tabs> <tab title="Kotlin" sync="kotlin"> 

```kotlin
subscription.addPartnerParameter("key", "value")
subscription.addPartnerParameter("foo", "bar")
```

</Tab> <tab title="Java" sync="java" > 

```java
subscription.addPartnerParameter("key", "value");
subscription.addPartnerParameter("foo", "bar");
```

</Tab> </Tabs> 

2\. サブスクリプション情報を送信する
---------------------

```java
public static void trackPlayStoreSubscription(final AdjustPlayStoreSubscription subscription)
```

サブスクリプションオブジェクトを設定したら、Adjust SDKを使用してそれをAdjustに送信できます。完了したオブジェクトを `trackPlayStoreSubscription`メソッドにパスして、ユーザーのサブスクリプション購入を記録します。
<tabs> <tab title="Kotlin" sync="kotlin"> 

```kotlin
val subscription = AdjustPlayStoreSubscription(
   price,
   currency,
   sku,
   orderId,
   signature,
   purchaseToken)
subscription.setPurchaseTime(purchaseTime)

Adjust.trackPlayStoreSubscription(subscription)
```

</Tab> <tab title="Java" sync="java" > 

```java
AdjustPlayStoreSubscription subscription = new AdjustPlayStoreSubscription(
   price,
   currency,
   sku,
   orderId,
   signature,
   purchaseToken);
subscription.setPurchaseTime(purchaseTime);

Adjust.trackPlayStoreSubscription(subscription);
```

</Tab> </Tabs>

