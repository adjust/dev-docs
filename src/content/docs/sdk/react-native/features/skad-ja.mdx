---
title: "SKAdNetworkとconversion valueの設定"
description: "iOSアプリのSKAdNetwork機能を設定します。"
slug: "en/sdk/react-native/features/skad"
---
<callout type="important"> 

この機能は、iOS 14以降のiOSデバイスのみにおいて利用可能です。
</Callout> 

StoreKit AdNetwork（SKAdNetwork）は、アプリのインストールおよび再インストールアトリビューションのための、Appleのフレームワークです。SKAdNetworkのワークフローは以下のようになります：

1. Appleがアトリビューション情報を収集し、関連するアドネットワークに通知します。
2. ネットワークがこの情報をAdjustにポストバックで送信します。
3. Adjustが[Datascape](https://help.adjust.com/en/suite/article/datascape)上にSKAdNetworkデータを表示します。

[SKAdNetworkの通信を無効化する](disable-skadnetwork-communication)
---------------------------------------------------------

<codeblock title="メソッドシグネチャー"> 

```ts
public deactivateSKAdNetworkHandling(): void
```

</CodeBlock> <minorversion added="v4.23.0"> 

Adjust SDKはv4\.23\.0以降ではデフォルトでSKAdNetworkと通信を行います。SDKは初期化時にSKAdNetworkのアトリビューションを記録します。
</MinorVersion> 

Configオブジェクトには`boolean` `isSKAdNetworkHandlingActive`プロパティが含まれており、それが動作を制御します。SKAdNetworkとの通信を非有効化するには、引数なしで`deactivateSKAdNetworkHandling`メソッドを呼び出してください。
<callout type="important"> 

Adjust SDKを初期化する *前* に、`deactivateSKAdNetworkHandling`メソッドを呼び出す必要があります。
</Callout> 

```jsx
const adjustConfig = new AdjustConfig(
   "{YourAppToken}",
   AdjustConfig.EnvironmentSandbox,
);
//...
adjustConfig.deactivateSKAdNetworkHandling();
//...
Adjust.create(adjustConfig);
```

[Conversion valueを更新する](update-conversion-values)
-------------------------------------------------

<codeblock title="メソッドシグネチャー"> 

```ts
updateConversionValue: (conversionValue: number) => void
```

</CodeBlock> 

Conversion values are a mechanism used to measure user behavior in SKAdNetwork. You can map 64 conditions to values from `0` through `63` and send this integer value to SKAdNetwork on user install. This gives you insight into how your users interact with your app in the first few days.

Adjustでconversion valueを管理している場合、AdjustのサーバーはSDKでこの値を更新します。また、`updateConversionValue`メソッドを使用して、この値を更新することが可能です。このメソッドは[Appleの`updateConversionValue`メソッド](https://developer.apple.com/documentation/storekit/skadnetwork/3566697-updateconversionvalue)をラップしており、更新されたconversion valueを表す整数の引数を受け入れます。

```jsx
Adjust.updateConversionValue(6);
```

### [例](example)

この例では、ユーザーがイベントをトリガーしたことに応じて、conversion valueを`10`に更新する方法を示しています。

```jsx
function _onPress_trackSimpleEvent() {
   Adjust.updateConversionValue(10);
}
```

[Conversion valueの変更を受信する](listen-for-changes-to-conversion-values)
-------------------------------------------------------------------

<codeblock title="メソッドシグネチャー"> 

```ts
public setConversionValueUpdatedCallbackListener(
   callback: (conversionValue: AdjustConversionValue) => void
): void

```

</CodeBlock> 

Adjustを使用してconversion valueを管理している場合、Adjustのサーバーはconversion valueのアップデートをSDKに送信します。`setConversionValueUpdatedCallbackListener`メソッドを使用して、こうした変更を受信するデリゲート関数を設定できます。関数を引数としてパスしてください。

```jsx
const adjustConfig = new AdjustConfig(appToken, environment);

adjustConfig.setConversionValueUpdatedCallbackListener(
   function (conversionValue) {
      console.log("Conversion value updated callback recveived");
      console.log("Conversion value: " + conversionValue.conversionValue);
   },
);

Adjust.create(adjustConfig);
```

### [例](example-1)

この例では、conversion valueが更新されたときに以下を記録する方法を示しています：

* conversion valueのアップデートを確認するメッセージ
* 新しいconversion value

```jsx
import { Adjust, AdjustEvent, AdjustConfig } from "react-native-adjust";
import { AdjustOaid } from "react-native-adjust-oaid";

const App: () => React$Node = () => {
   Adjust.getSdkVersion(function (sdkVersion) {
      console.log("Adjust SDK version: " + sdkVersion);
   });

   const adjustConfig = new AdjustConfig(
      "{YourAppToken}",
      AdjustConfig.EnvironmentSandbox
   );

   adjustConfig.setConversionValueUpdatedCallbackListener(function (
      conversionValue
   ) {
      console.log("Conversion value updated. Callback received");
      console.log("Conversion value: " + conversionValue.conversionValue);
   });

   Adjust.create(adjustConfig);
};

export default App;
```

