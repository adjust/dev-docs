---
title: Set up direct deep linking
description: Configure direct deep linking for your app.
slug: en/sdk/ios/features/deep-links/direct
sidebar-position: 2
versions:
   - label: v5
     value: v5
     default: true
   - label: v4
     value: v4
redirects:
   v4: /en/sdk/ios/v4/features/deep-links/direct
---

When a user with your app installed clicks an Adjust link, direct deep linking ensures they're taken directly to specific content within the app.

## Setup {#setup}

iOS provides several methods for receiving direct deep links depending on your app's implementation.

Within these methods, you'll use Adjust's `processAndResolve(_:withCompletionHandler:)` method, which does the following:

- Records attribution from deep link clicks
- Resolves [short branded links](https://help.adjust.com/en/article/short-branded-links) to their long branded link equivalent
- Passes through all other links as is (Adjust long branded links, other universal links, app scheme deep links)

Your app can then handle the resolved link by parsing it and navigating to the appropriate screen.

<CodeBlock title="Method signature">
   
```objc 
+ (void)processAndResolveDeeplink:(nonnull ADJDeeplink *)deeplink
            withCompletionHandler:(nonnull ADJResolvedDeeplinkBlock)completion;
```

</CodeBlock>

## Important Implementation Notes {#important-implementation-notes}

Follow these deep link handling best practices:

1. **Link Handling Requirements**

   - Your app should handle Adjust branded links (`brandname.go.link`) and your universal links (`example.com`) identically. If your app uses a domain allowlist, ensure your Adjust branded domain is included. For example, both of the following should navigate to the same screen:

      - Adjust branded link: `https://brandname.go.link/summer-clothes?promo=beach`
      - Universal link: `https://example.com/summer-clothes?promo=beach`

   - Your app should handle Adjust branded links and app scheme deep links identically. In cases where iOS doesn't support universal links, Adjust converts them to the equivalent app scheme format. For example, both of the following should navigate to the same screen:
      - Adjust branded link: `https://brandname.go.link/summer-clothes?promo=beach`
      - App scheme deep link: `example://summer-clothes?promo=beach`

2. **App State Considerations**

   - Ensure your app correctly handles links when they open the app from any state: "not running," background, or, if applicable, foreground.
   - Consider storing deep links if they can't be handled immediately, such as when the user isn't yet authenticated, and process them once the app is ready for navigation.

3. **In-App Navigation**
   - When an app tries to open its own universal links by calling `UIApplication.open(_:options:completionHandler:)` or SwiftUI’s `openURL`, iOS opens them in Safari instead of the app. To use these methods for internal navigation, you can only pass app scheme deep links to them. Alternatively, you can place universal links within your app and use your deep link handling logic to parse them and navigate to the appropriate screen.

## Implementation {#implementation}

Use the implementation that aligns with your app's structure:

- [UIKit apps using AppDelegate lifecycle](#uikit-apps-using-appdelegate-lifecycle)
- [UIKit apps using SceneDelegate lifecycle](#uikit-apps-using-scenedelegate-lifecycle)
- [SwiftUI apps using AppDelegate lifecycle](#swiftui-apps-using-appdelegate-lifecycle)
- [SwiftUI apps using SceneDelegate lifecycle](#swiftui-apps-using-scenedelegate-lifecycle)

### UIKit apps using AppDelegate lifecycle {#uikit-apps-using-appdelegate-lifecycle}

Update your AppDelegate to implement iOS direct deep linking methods.

<Tabs>
<Tab title="Swift" sync="swift">

```swift
// AppDelegate.swift

// Receive universal link when app is installed
// and link opens app from "not running"
// or background state.
func application(
  _ application: UIApplication,
  continue userActivity: NSUserActivity,
  restorationHandler: @escaping ([UIUserActivityRestoring]?) -> Void
) -> Bool {
  guard userActivity.activityType == NSUserActivityTypeBrowsingWeb,
    let incomingLink = userActivity.webpageURL
  else { return true }

  // Create deep link object
  guard let deeplink = ADJDeeplink(deeplink: incomingLink) else { return }

  // Send deep link to Adjust's servers for attribution.
  // If short branded link, receive long link.
  // Otherwise, receive original link.
  Adjust.processAndResolve(deeplink) { resolvedLink in
    // Handle failure if resolvedLink is nil
    guard let resolvedLink = resolvedLink else { return }

    // TO DO: Handle resolvedLink by parsing its components
    // (example: path, query parameters) and
    // navigating to the appropriate screen.
  }

  return true
}

// Receive app scheme deep link when app is installed
// and link opens app from "not running",
// background, or foreground state.
func application(
  _ application: UIApplication,
  open incomingLink: URL,
  options: [UIApplication.OpenURLOptionsKey: Any] = [:]
) -> Bool {
  // Create deep link object
  guard let deeplink = ADJDeeplink(deeplink: incomingLink) else { return }

  // Send deep link to Adjust's servers for attribution.
  // If short branded link, receive long link.
  // Otherwise, receive original link.
  Adjust.processAndResolve(deeplink) { resolvedLink in
    // Handle failure if resolvedLink is nil
    guard let resolvedLink = resolvedLink else { return }

    // TO DO: Handle resolvedLink by parsing its components
    // (example: path, query parameters) and
    // navigating to the appropriate screen.
  }
  return true
}
```

</Tab>
<Tab title="Objective-C" sync="objc">

```objc
// AppDelegate.m

// Receive universal link when app is installed
// and link opens app from "not running"
// or background state.
- (BOOL)application:(UIApplication *)application
    continueUserActivity:(NSUserActivity *)userActivity
      restorationHandler:
          (void (^)(NSArray<id<UIUserActivityRestoring>> *_Nullable))
              restorationHandler {
  // Check if it's a web browsing activity
  if (![userActivity.activityType
          isEqualToString:NSUserActivityTypeBrowsingWeb])
    return YES;

  // Check if there's a valid URL
  NSURL *incomingLink = userActivity.webpageURL;
  if (!incomingLink) return YES;

  // Create deep link object
  ADJDeeplink *deeplink = [[ADJDeeplink alloc] initWithDeeplink:incomingLink];
  if (!deeplink) return YES;

  // Send deep link to Adjust's servers for attribution.
  // If short branded link, receive long link.
  // Otherwise, receive original link.
  [Adjust processAndResolveDeeplink:deeplink
              withCompletionHandler:^(NSString *resolvedLink) {
                // Handle failure if resolvedLink is nil
                if (!resolvedLink) return;

                // TO DO: Handle resolvedLink by parsing its components
                // (example: path, query parameters) and
                // navigating to the appropriate screen.
              }];

  return YES;
}

// Receive app scheme deep link when app is installed
// and link opens app from "not running",
// background, or foreground state.
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)incomingLink
            options:
                (NSDictionary<UIApplicationOpenURLOptionsKey, id> *)options {
  // Create deep link object
  ADJDeeplink *deeplink = [[ADJDeeplink alloc] initWithDeeplink:incomingLink];
  if (!deeplink) return YES;

  // Send deep link to Adjust's servers for attribution.
  // If short branded link, receive long link.
  // Otherwise, receive original link.
  [Adjust processAndResolveDeeplink:deeplink
              withCompletionHandler:^(NSString *resolvedLink) {
                // Handle failure if resolvedLink is nil
                if (!resolvedLink) return;

                // TO DO: Handle resolvedLink by parsing its components
                // (example: path, query parameters) and
                // navigating to the appropriate screen.
              }];
  return YES;
}
```

</Tab>
</Tabs>

### UIKit apps using SceneDelegate lifecycle {#uikit-apps-using-scenedelegate-lifecycle}

Update your SceneDelegate to implement iOS direct deep linking methods.

<Tabs>
<Tab title="Swift" sync="swift">

```swift
// SceneDelegate.swift

// Receive universal link or app scheme deep link when app is installed
// and link opens app from "not running" state.
func scene(
    _ scene: UIScene,
    willConnectTo session: UISceneSession,
    options connectionOptions: UIScene.ConnectionOptions
    ) {

    guard let userActivity = connectionOptions.userActivities.first,
      userActivity.activityType == NSUserActivityTypeBrowsingWeb,
      let incomingURL = userActivity.webpageURL
    else { return }

    // call the below method to resolve deep link
    ADJLinkResolution.resolveLink(
      withUrl: incomingURL,
      resolveUrlSuffixArray: ["email.example.com", "short.example.com"],
      callback: { resolvedURL in
        // add your code below to handle deep link
        // (for example, open deep link content)
        // resolvedURL object contains the deep link


        // call the below method to send deep link to Adjust's servers
        if let deeplink = ADJDeeplink(deeplink: resolvedURL) {
            Adjust.processDeeplink(deeplink)
        }
      })
}

func scene(
    _ scene: UIScene,
    continue userActivity: NSUserActivity) {

    if userActivity.activityType == NSUserActivityTypeBrowsingWeb {
        let incomingURL = userActivity.webpageURL

        // call the below method to resolve deep link
        ADJLinkResolution.resolveLink(
        withUrl: incomingURL,
        resolveUrlSuffixArray: ["email.example.com", "short.example.com"],
        callback: { resolvedURL in
            // add your code below to handle deep link
            // (for example, open deep link content)
            // resolvedURL object contains the deep link


            // call the below method to send deep link to Adjust's servers
            if let deeplink = ADJDeeplink(deeplink: resolvedURL) {
                Adjust.processDeeplink(deeplink)
            }
        })
    }
}
```

</Tab>
<Tab title="Objective-C" sync="objc">

```objc
- (void)scene:(UIScene *)scene willConnectToSession:(UISceneSession *)session
    options:(UISceneConnectionOptions *)connectionOptions {

    NSUserActivity* userActivity =
    [[[connectionOptions userActivities] allObjects] firstObject];

    if ([[userActivity activityType]
        isEqualToString:NSUserActivityTypeBrowsingWeb]) {
        NSURL *incomingURL = [userActivity webpageURL];

        // call the below method to resolve deep link
        [ADJLinkResolution
        resolveLinkWithUrl:incomingURL
        resolveUrlSuffixArray:@[
        @"email.example.com", @"short.example.com"
        ]
        callback:^(NSURL* _Nullable resolvedURL) {
            // add your code below to handle deep link
            // (for example, open deep link content)
            // resolvedURL object contains the deep link


            // call the below method to send deep link to Adjust's servers
            ADJDeeplink *deeplink = [[ADJDeeplink alloc] initWithDeeplink:resolvedURL];
            [Adjust processDeeplink:deeplink];
        }];
    }
}

- (void)scene:(UIScene *)scene continueUserActivity:(NSUserActivity *)userActivity{
    if ([[userActivity activityType]
        isEqualToString:NSUserActivityTypeBrowsingWeb]) {
        NSURL *incomingURL = [userActivity webpageURL];

        // call the below method to resolve deep link
        [ADJLinkResolution
        resolveLinkWithUrl:incomingURL
        resolveUrlSuffixArray:@[
        @"email.example.com", @"short.example.com"
        ]
        callback:^(NSURL* _Nullable resolvedURL) {
            // add your code below to handle deep link
            // (for example, open deep link content)
            // resolvedURL object contains the deep link


            // call the below method to send deep link to Adjust's servers
            ADJDeeplink *deeplink = [[ADJDeeplink alloc] initWithDeeplink:resolvedURL];
            [Adjust processDeeplink:deeplink];
        }];
    }
}
```

</Tab>
</Tabs>

#### Custom URL scheme {#custom-url-scheme-2}

1. Update the `scene(_:willConnectTo:options:)` method in your scene delegate. When a user clicks on your custom URL scheme deep link and the user has your app closed, iOS opens your app and delivers the deep link to this method.
2. Update the `scene(_:openURLContexts:)` method in your scene delegate. When a user clicks on your custom URL scheme deep link, and the user has your app running in the background, iOS opens your app and delivers the deep link to this method.

These methods call the `Adjust.processDeeplink` method in the Adjust SDK. This method sends deep links to Adjust's servers to recordd them. You can pass both Adjust and non-Adjust deep links to this method. Adjust's servers ignore any deep links that don’t have Adjust parameters.

<Tabs>
<Tab title="Swift" sync="swift">

```swift
func scene(
    _ scene: UIScene,
    openURLContexts URLContexts: Set<UIOpenURLContext>
    ) {

    guard let incomingURL = URLContexts.first?.url else {
        return
    }

    // add your code below to handle deep link
    // (for example, open deep link content)
    // incomingURL object contains the deep link


    // call the below method to send deep link to Adjust's servers
    if let deeplink = ADJDeeplink(deeplink: incomingURL) {
        Adjust.processDeeplink(deeplink)
    }
}
```

</Tab>
<Tab title="Objective-C" sync="objc">

```objc
- (void)scene:(UIScene *)scene
    openURLContexts:(nonnull NSSet<UIOpenURLContext *> *)URLContexts {

    NSURL *incomingURL = [[URLContexts allObjects] firstObject].URL;

    if (incomingURL) {
        // add your code below to handle deep link
        // (for example, open deep link content)
        // incomingURL object contains the deep link


        // call the below method to send deep link to Adjust's servers
        ADJDeeplink *deeplink = [[ADJDeeplink alloc] initWithDeeplink:incomingURL];
        [Adjust processDeeplink:deeplink];
    }
}
```

</Tab>
</Tabs>

### SwiftUI apps using SceneDelegate lifecycle {#swiftui-apps-using-scenedelegate-lifecycle}

Follow the instructions in the [SwiftUI apps using AppDelegate lifecycle](#swiftui-apps-using-appdelegate-lifecycle) section. The `onOpenURL` SwiftUI modifier receives universal links and app scheme deep links when the app is installed and the link opens the app from a background or foreground state.

In addition, implement the `scene(_:willConnectTo:options:)` method from the [UIKit apps using SceneDelegate lifecycle](#uikit-apps-using-scenedelegate-lifecycle) section. This method receives universal links and app scheme deep links when the app is installed and the link opens the app from a "not running" state.

### SwiftUI apps using AppDelegate lifecycle {#swiftui-apps-using-appdelegate-lifecycle}

If you haven't already done so, create an `AppDelegate.swift` file in your project's main directory and reference it in your main application file, as shown in the example `App.swift` file below. This is required to handle app lifecycle events and Adjust SDK integration. Also, implement the `onOpenURL` SwiftUI modifier, which receives universal links and app scheme deep links when the app is installed.

<Tabs>
<Tab title="Swift" sync="swift">

```swift
// App.swift

import AdjustSdk
import SwiftUI

@main
struct MyApp: App {
  @UIApplicationDelegateAdaptor(AppDelegate.self) var appDelegate

  var body: some Scene {
    WindowGroup {
      ContentView()
        // Receive universal link or app scheme deep link when app is installed
        // and link opens app from "not running",
        // background, or foreground state.
        .onOpenURL { incomingLink in
          // Create deep link object
          guard let deeplink = ADJDeeplink(deeplink: incomingLink) else { return }

          // Send deep link to Adjust's servers for attribution.
          // If short branded link, receive long link.
          // Otherwise, receive original link.
          Adjust.processAndResolve(deeplink) { resolvedLink in
            // Handle failure if resolvedLink is nil
            guard let resolvedLink = resolvedLink else { return }

            // TO DO: Handle resolvedLink by parsing its components
            // (example: path, query parameters) and
            // navigating to the appropriate screen.
          }
        }
    }
  }
}
```

</Tab>
</Tabs>
