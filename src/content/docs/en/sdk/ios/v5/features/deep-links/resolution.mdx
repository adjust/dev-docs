---
title: Link Resolution
description: Set up link resolution for email deep links.
slug: en/sdk/ios/features/deep-links/resolution
sidebar-position: 4
versions:
   - label: v5
     value: v5
     default: true
   - label: v4
     value: v4
redirects:
   v4: /en/sdk/ios/v4/features/deep-links/resolution
---

Email marketing platforms measure clicks by replacing original URLs with redirect URLs.

Original URL:

`https://brandname.go.link/summer-clothes?promo=beach&adj_t=abc123`

Becomes:

`https://email.example.com/2wuTnQvU`

This enables detailed click-through analytics in the email marketing platform. However on iOS, these redirect URLs can prevent universal links from opening directly in the app.
Adjust's Link Resolution feature solves this by doing the following:

1. Opening the redirect URL as a universal link in your app
2. Following the redirect chain to reach the final destination URL
3. Passing that final URL to your app for deep linking

This approach maintains both email campaign measurement and seamless deep linking for iOS users.

## How it works {#how-it-works}

1. You create a campaign in your email marketing platform.
2. In the emails, you use your Adjust deep links.
3. When you send the emails, the email marketing platform replaces the Adjust deep links with its analytics redirect URLs.
4. A user who has your app installed clicks on the redirect URL in your email, which opens as a universal link in your app.
5. Your app passes the link to the `resolveLinkWithUrl` link resolution method in the Adjust SDK.
6. The link resolution method in the Adjust SDK compares the domain in the redirect URL against the link resolution domains configured in the Adjust SDK, and one of two things happens:

   - Domains don't match - The method returns the deep link as is.
   - Domains match - The method resolves the link and returns the resulting deep link.

   The Adjust SDK will follow up to ten redirects when attempting to resolve to the final destination URL. If there are more than ten redirects, the SDK will return the tenth redirect URL.

7. Your app passes the returned link to the `processAndResolve(_:callback:)` method in the Adjust SDK. This method returns the processed link.
8. Your app handles the processed link and navigates the user to the deep link screen.

<Callout type="note">

When a user without your app clicks on the redirect URL, iOS handles this as a normal web URL and redirects the user to the App Store. In this case, link resolution isn't applicable.

</Callout>

### Setup {#setup}

1. Create a domain or a subdomain dedicated to email measurement if you don't already have one. To do this, you'll have to update the DNS settings on your domain. This may be at your domain registrar or web host, depending on who manages your DNS servers.

   **Example:** `email.example.com`

2. Add the email redirect domain to your [**Associated Domains** configuration](/en/sdk/ios/features/deep-links/configure-deep-link-settings#configure-universal-links) in Xcode.

   **Example:** `applinks:email.example.com`

3. In your email marketing platform, set up the domain your created as a custom redirect domain.

4. Add the link resolution method to your [direct deep linking](/en/sdk/ios/features/deep-links/direct) implementation in front of wherever you are calling `processAndResolve(_:callback:)`. Add your email redirect domain to `resolveUrlSuffixArray`.

<Tabs>
<Tab title="Swift" sync="swift">

```swift
// Resolve email redirect
ADJLinkResolution.resolveLink(
  with: incomingLink,
  resolveUrlSuffixArray: ["email.example.com"],
  callback: { resolvedLink in
    guard let resolvedLink = resolvedLink else { return }

    // Send incoming deep link to Adjust's servers for attribution
    // and retrieve full URL if short branded link.
    // If not, retrieve original link.
    let deeplink = ADJDeeplink(deeplink: resolvedLink)
    Adjust.processAndResolve(deeplink) { processedLinkString in
      guard let processedLink = URL(string: processedLinkString) else { return }

      // TO DO: Parse the processedLink URL components
      // (example: path, query params) and
      // navigate to the appropriate screen in your app
    }
  }
)
```

</Tab>
<Tab title="Objective-C" sync="objc">

```objc
// Resolve email analytics redirect
// Add your email analytics domain to resolveUrlSuffixArray
[ADJLinkResolution resolveLinkWithUrl:incomingUrl
                resolveUrlSuffixArray:@[@"email.example.com"]
                            callback:^(NSURL *resolvedUrl) {
  if (!resolvedUrl) { return; }

  // Send incoming deep link to Adjust's servers for attribution
  // and retrieve full URL if short branded link.
  // If not, retrieve original link.
  ADJDeeplink *deeplink = [[ADJDeeplink alloc] initWithDeeplink:resolvedUrl];
  [Adjust processAndResolveDeeplink:deeplink
                      callback:^(NSString *processedLinkString) {
    NSURL *processedLink = [NSURL URLWithString:processedLinkString];
    if (!processedLink) { return; }

    // TO DO: Parse the processedLink URL components
    // (example: path, query params) and
    // navigate to the appropriate screen in your app
  }];
}];
```

</Tab>
</Tabs>

6. Set up a content delivery network (CDN), such as Amazon CloudFront, CloudFlare, or Fastly, to handle incoming requests to your email redirect domain. On the CDN, you need to set up the following:

   1. **SSL certificate**: iOS requires that universal links use only HTTPS. So, an SSL certificate is required for your email redirect domain.
   2. **AASA (Apple-App-Site-Association) file**: Depending on your email partner, you need to either host your own AASA file or upload the AASA file to the email partner system. For information on hosting an AASA file, refer to your email partner's documentation.

   You can download the AASA file for your universal link hosted on this path - `https://example.go.link/.well-known/apple-app-site-association`. Replace the domain with your universal link domain. You can copy the Adjust Universal Link AASA file and use it for your email redirect domain AASA file. If your email partner requires you to host your own AASA file, your CDN needs to serve it from the corresponding path on your email redirect domain - `https://email.example.com/.well-known/apple-app-site-association`

   3. Point all requests to the email redirect domain (except for the AASA file, if applicable) to the email partnerâ€™s redirect server.

   **Example:** `redirect.example.net`

7. Configure the DNS for your email redirect domain to point to your CDN.

<Callout>

For partner-specific instructions that correspond to the above instructions, refer to the [ESP integrations section](https://help.adjust.com/en/marketer/esp-integrations) in the Help Center.

</Callout>

##### Support for email partners {#support-for-email-partners}

To use link resolution, your email partner needs to let you to set up the redirection domain (or subdomain) as a universal link domain. If this is the case, you can point their redirection service to your own custom domain.

**Examples:**

- Braze: Depending on which ESP Braze has assigned, set up your redirect domain with SendGrid or SparkPost, and point your own custom domain to it. You can then configure your custom domain as a universal link domain.
- Iterable: Iterable provides the URL redirection service that supports custom domains.
- Mailchimp: Link resolution isn't available because Mailchimp doesn't allow you to configure their redirect domain as a universal link.
