---
title: "서버 간(S2S) 보안"
description: "S2S 보안 기능을 통해 S2S 이벤트의 보안을 보장하고, 스푸핑 요청을 방지할 수 있습니다."
slug: "ko/api/s2s-api/security"
sidebar-position: 1
sidebar-label: "서버 간(S2S) 보안"
---

S2S 보안 기능을 통해 S2S 이벤트의 보안을 보장하고, 스푸핑 요청을 방지할 수 있습니다. S2S 인증을 설정하면, 수신되는 모든 요청에 Adjust 대시보드에서 생성된 토큰이 포함되어야 합니다. 유효한 토큰이 포함되어 있지 않은 요청은 Adjust 서버에서 거부됩니다.

## 시작에 앞서 {#before-you-begin}

시작하기 전에 알아야 할 사항은 다음과 같습니다.

<Callout type="warning">

S2S 보안은 Google 태그 매니저 이벤트 측정과 호환되지 않습니다. Google 태그 매니저 구성에서 Adjust의 S2S 인증 토큰을 사용하면 Google 태그 이벤트가 거부됩니다.

</Callout>

### 요구 사항 {#requirements}

-  [관리자 권한](https://help.adjust.com/ko/article/permission-levels)

## S2S 토큰 생성 {#create-an-s2s-token}

<Callout type="important">

S2S 인증을 활성화하려면 토큰을 1개 이상 구성해야 합니다.

</Callout>

1. **AppView** 에서 **모든 앱** 을 선택합니다.
2. 해당 앱을 선택합니다.
3. **Protection** 탭을 선택합니다.
4. **S2S 보안** 섹션 하단의 **S2S 보안 열기** 를 선택합니다.
5. **토큰 추가** 를 선택합니다.
6. 토큰 이름을 입력한 다음 **토큰 추가** 를 선택합니다.
7. 복사 아이콘을 선택하여 토큰을 복사한 후 이를 S2S 이벤트 요청에 추가하기 위해 개발자에게 전송합니다.
8. 연동 확인을 위해 개발자에게 테스트 진행을 요청하시기 바랍니다.

이 시점에서는 S2S 인증이 아직 활성화되지 않으며 유효하지 않은 토큰을 전달하는 요청도 여전히 허용됩니다. S2S 인증을 활성화하기 전에 담당 TAM\(테크니컬 어카운트 매니저\)에게 문의하거나 [support@adjust.com](mailto:support@adjust.com)에 문의하여 설정을 확인하시기 바랍니다.

## 토큰 범위 {#token-scopes}

S2S 인증이 활성화되면 각 토큰의 **범위** 를 지정해야 합니다. 범위는 토큰을 사용하여 수행할 수 있는 작업을 정의합니다. 사용 가능한 범위는 다음과 같습니다.

-  **이벤트** : 이벤트 데이터 전송 권한을 부여합니다.
-  **세션** : 세션 데이터 전송 권한을 부여합니다.
-  **광고 매출** : 광고 매출 데이터 전송 권한을 부여합니다.

### 범위 지정 토큰 생성 {#create-a-scoped-token}

새 범위 지정 토큰을 생성하려면 다음을 수행하시기 바랍니다.

1. **AppView** 에서 **모든 앱** 을 선택합니다.

2. 해당 앱을 선택합니다.

3. **Protection** 탭을 선택합니다.

4. **S2S 보안** 섹션 하단의 **S2S 보안 열기** 를 선택합니다.

   ![Adjust의 S2S 보안 페이지](@images/s2s/1-s2s-security.png)

5. **토큰 추가** 를 선택합니다. 모달창이 표시됩니다.

6. 모달창에 **토큰 이름** 을 입력합니다.

   !["새 토큰 추가" 모달](@images/s2s/2-add-token-modal.png)

7. **범위** 드롭다운에서 해당 토큰에 할당할 범위를 선택합니다. 각 토큰에 여러 범위를 선택할 수 있습니다.

   ![범위가 지정된 토큰 모달](@images/s2s/3-token-scope-modal.png)

8. **토큰 추가** 를 선택하고 토큰을 저장합니다.

9. **토큰 복사 후 종료** 를 선택하고 토큰을 복사합니다. 복사한 토큰을 개발자에게 보내 S2S 이벤트 요청에 추가합니다.

   !["토큰 복사 후 종료" 옵션이 포함된 모달](@images/s2s/4-copy-token.png)

각 토큰의 범위가 토큰 목록에 표시됩니다.

![범위가 지정된 토큰 목록](@images/s2s/5-scoped-token-list.png)

### 범위 지정 토큰 수정 {#modify-a-scoped-token}

기존 토큰의 범위를 수정하는 방법은 다음과 같습니다.

1. **AppView** 에서 **모든 앱** 을 선택합니다.

2. 해당 앱을 선택합니다.

3. **Protection** 탭을 선택합니다.

4. **S2S 보안** 섹션 하단의 **S2S 보안 열기** 를 선택합니다.

5. 목록에서 토큰을 찾은 다음 편집 아이콘을 선택합니다.

   ![범위가 지정된 토큰 목록(인라인 편집 버튼 포함)](@images/s2s/5-scoped-token-list.png)

6. **범위** 드롭다운에서 범위를 추가하거나 삭제합니다.

7. **토큰 편집** 을 선택하여 변경 내용을 저장합니다.

   ![범위 목록과 함께 토큰을 보여주는 모달](@images/s2s/6-scoped-token-edit.png)

## 서버 간\(S2S\) 인증 활성화 {#activate-s2s-authentication}

<Callout type="important">

개발자의 토큰 테스트 및 TAM\(테크니컬 어카운트 매니저\) 또는 [support@adjust.com](mailto:support@adjust.com)의 검증이 완료된 이후에만 S2S 인증을 활성화하시기 바랍니다.

</Callout>

S2S 인증을 활성화하려면 다음 단계를 따르십시오.

1. **AppView** 에서 **모든 앱** 을 선택합니다.
2. 해당 앱을 선택합니다.
3. **Protection** 탭을 선택합니다.
4. **S2S 보안** 섹션 하단의 **S2S 보안 열기** 를 선택합니다.
5. 구성한 토큰이 1개 이상인지 확인합니다.
6. 토글을 **ON** 으로 설정합니다. 구성된 토큰과 함께 전송된 요청만 작동할 것이라는 경고 메시지가 표시됩니다.
7. **켜기** 선택하여 계속 진행합니다.

이제부터 수신되는 모든 S2S 요청에는 활성화된 인증 토큰이 포함돼야 합니다. 이전에 범위를 지정하지 않고 토큰을 구성한 경우, 이 토큰은 **모든** 엔드포인트에서 계속 작동합니다. 보안 강화를 위해 범위가 지정된 토큰을 사용하는 것이 좋습니다.

## 인증된 요청 예시 {#example-authenticated-request}

```console
curl -v -X \
POST -H \
"Authorization: Bearer v8s5opi0zs45607l8h8c48wak2vxb5oe" \
"https://s2s.adjust.com/event?s2s=1&app_token=abc123kuvada7&event_token=xyzklm&gps_adid=11110111-2345-6789-1122-000000005678"
```

```text
> POST /event?s2s=1&app_token=abc123kuvada7&event_token=xyzklm&gps_adid=11110111-2345-6789-1122-000000005678 HTTP/1.1
> Host: s2s.adjust.com
> User-Agent: curl/7.54.0
> Accept: */*
> Authorization: Bearer v8s5opi0zs45607l8h8c48wak2vxb5oe
```

요청에 대해서 아래와 같은 응답을 받게 됩니다.

| 응답 코드 | 응답 메시지                  | 원인                                                                                                           |
| --------- | ---------------------------- | -------------------------------------------------------------------------------------------------------------- |
| `200`     | OK                           | 요청이 수락됨                                                                                                  |
| `202`     | Missing authentication token | 요청에 추가 된 토큰이 없음                                                                                     |
| `202`     | Wrong authentication token   | 토큰이 추가되었지만 인식되지 않음.<br />토큰이 올바르게 설정되어 있고 대시보드에서 활성화되어 있는지 확인 필요 |

## 토큰 관리하기 {#manage-your-tokens}

여러 개의 인증 토큰을 추가하기 위해서는 [위에서 설명한 설정 단계](#activate-s2s-authentication)를 동일하게 진행하면 됩니다.

<Callout type="note">

토큰 도입 이후 항상 토큰을 테스트하시기 바랍니다. S2S 인증이 활성화된 이후에는 올바르게 도입되지 않은 새 토큰이 포함된 요청은 거부됩니다.

</Callout>

토큰을 더 이상 사용하지 않는다면, **비활성화** 하실 수 있습니다.

1. **AppView** 아래의 **나의 앱\(My apps\)** 을 선택합니다.
2. 해당 앱을 선택합니다.
3. **Protection** 탭을 선택합니다.
4. **S2S 보안** 섹션 하단의 **S2S 보안 열기** 를 선택합니다.
5. 토큰을 찾고 토글을 **OFF** 로 설정합니다.

<Callout type="important">

모든 토큰이 비활성화되면 Adjust는 모든 S2S 트래픽을 거부하지 않도록 자동으로 S2S 인증을 비활성화합니다.

</Callout>

언제든지 토글을 **ON** 하여 비활성 토큰을 다시 활성화하거나 **비활성화된 토큰 보기** 토글을 OFF하여 비활성 토큰을 숨길 수 있습니다.

S2S 인증을 비활성화하려면 **S2S 인증 활성화\(ON\): 광고 해킹이 차단됩니다** 라고 적힌 토글을 비활성화합니다. 경고 모달이 나타납니다. S2S 인증을 비활성화하기 위해 **끄기** 를 선택합니다.
