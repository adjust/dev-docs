---
import { Code as ExpressiveCode } from "astro-expressive-code/components";
import { extractCodeFromHTML } from "@components/utils/extractCode";

export interface Props {
  title?: string;
  highlight?: string;
  collapse?: string;
}

const { title, highlight, collapse } = Astro.props as Props;

let content = "";

if (Astro.slots.has("default")) {
  // Get the raw content of the slot without transformations
  content = await Astro.slots.render("default");
}

const { code, lang } = extractCodeFromHTML(content);
---

<ExpressiveCode
  title={title}
  lang={lang}
  collapse={collapse}
  mark={highlight}
  code={code}
/>
