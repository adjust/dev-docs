---
import { Tile as AtlasTile } from "@adjust/components";
import type { IconName } from "@adjust/components";

export interface Props {
  icon?: IconName;
}

const { icon } = Astro.props as Props;

let content = "";
let title = "";
const titleRegex = /(^<h3 .*?>(.*?)<\/h3>)/m

if (Astro.slots.has("default")) {
  content = await Astro.slots.render("default");
  if (titleRegex.test(content)) {
    let regex = titleRegex.exec(content);
    title = regex?.[2]!;
    content = content.replace(regex?.[1]!, "")
  }
}
---

<AtlasTile client:only="react" iconName={icon} title={title}>
  <Fragment set:html={content} name="chidren" />
</AtlasTile>
