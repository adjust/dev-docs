---
import TableOfContents from "./TableOfContents";
import { v4 as uuidv4 } from "uuid";
import { getLanguageFromURL } from "@i18n/utils";

const currentLang = getLanguageFromURL(Astro.url.pathname);

type Props = {
  headings: MarkdownHeadingWithId[];
  title: string;
};

const { headings, title } = Astro.props;

for (const heading of headings) {
  heading.id = uuidv4();
}
---

<TableOfContents
  client:only="react"
  headings={headings}
  title={title}
  lang={currentLang}
/>
