---
import { randomUUID } from "crypto";

export interface Props {
  sync: string;
  icon: string;
}

const { sync, icon } = Astro.props as Props;

// Store the content contained within the Accordion as a string.
// Replacing h3 element with populated sync value to make it accessible from Tabs component

let content = "";

const uniqueId = randomUUID();
if (Astro.slots.has("default")) {
  content = await Astro.slots.render("default");

  content = content.replace(
    /^<h3 id=".*">(.*)\<\/h3>/,
    `<h3 id="${uniqueId}" data-type="tab" data-sync=${sync} data-icon=${icon ?? "Code"}>$1</h3>`
  );
}
---

<div id={uniqueId} class="hidden">
  {/* additional div in case of adding styles to the content */}
  <div id="tab-content" set:html={content} />
</div>
